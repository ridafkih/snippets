---
const quotes = [
  "“So the whole universe,” you said, “it’s just…”",
  "“An egg.” I answered. “Now it’s time for you to move on to your next life.”",
  "“And I just sent you on your way.”",
];
---

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width" />
    <meta name="generator" content={Astro.generator} />
    <title>Rida F'kih | Text Shimmer Snippets</title>
  </head>
  <body>
    <ul>
      {
        quotes.map((quote) => (
          <li>
            <span>
              {quote}
              <div aria-hidden="true" data-quote={quote} />
            </span>
          </li>
        ))
      }
    </ul>
  </body>
</html>

<style is:global>
  * {
    margin: 0;
    padding: 0;
    list-style: none;
  }

  :root {
    font-family: "Outfit", system-ui, sans-serif;
    font-weight: 200;
    letter-spacing: 0.0125em;
    line-height: 2em;

    --shimmer-light-color: #eee;
    --shimmer-dark-color: #555;
  }

  html,
  body {
    width: 100%;
    height: 100%;
  }

  body {
    background: rgba(10, 10, 10, 1);
    display: grid;
    place-items: center;
  }

  li {
    anchor-name: --li;
  }

  span {
    anchor-scope: --span;
    anchor-name: --span;
    color: transparent;
  }

  span,
  div,
  div::before {
    text-wrap: nowrap;
  }

  div {
    pointer-events: none;
    position: fixed;
    container-type: inline-size;

    top: anchor(--span top);
    bottom: anchor(--span bottom);
    left: anchor(--li left);
    width: anchor-size(--span width);
  }

  div::before {
    --span-width: calc(100cqw / 1px);
    --scoped-animation-duration: calc(var(--span-width) / 100 / 2.5 * 1s);

    content: attr(data-quote);

    display: block;
    width: 200cqw;
    height: calc(100% + (1lh - 100%));

    color: transparent;
    background: linear-gradient(
      to right,
      var(--shimmer-dark-color),
      var(--shimmer-dark-color),
      var(--shimmer-light-color),
      var(--shimmer-dark-color),
      var(--shimmer-dark-color)
    );

    animation: var(--scoped-animation-duration) linear slide infinite;
    background-clip: text;
  }

  @keyframes slide {
    from {
      background-position-x: -100%;
    }
    to {
      background-position-x: 200cqw;
    }
  }
</style>
