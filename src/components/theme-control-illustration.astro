---
interface Props {
  variant?: "light" | "dark" | "system";
}

const { variant = "light" } = Astro.props;
---

<div class="illustration" data-variant={variant}>
  <div class="traffic-lights">
    <div class="red"></div>
    <div class="yellow"></div>
    <div class="green"></div>
  </div>
  <div class="skeleton lg"></div>
  <div class="skeleton md"></div>
  <div class="skeleton sm"></div>
</div>

<style>
  .illustration {
    --illustration-red: #cc6a5b;
    --illustration-yellow: #e4b652;
    --illustration-green: #7ab65b;

    --illustration-background: #ffffff;
    --illustration-skeleton: #f0f0f0;
    --illustration-outline: #dedede;

    position: relative;
    overflow: hidden;
    background: var(--illustration-background);
    border: 1.5px solid var(--illustration-outline);
    border-radius: 0.625rem;

    padding: 0.625rem;
    display: grid;
    grid-template-columns: repeat(5, 1fr);
    row-gap: 0.25rem;
    padding-bottom: 1.25rem;

    transition: 0.24s filter ease;
    filter: drop-shadow(0px 2px 1px rgba(0, 0, 0, 0.05));

    > * {
      grid-column-start: 1;
    }

    &[data-variant="dark"]::before {
      content: "";
      position: absolute;
      inset: 0;
      backdrop-filter: invert(1) contrast(0.75);
      z-index: 2;
    }

    &[data-variant="system"]::before {
      content: "";
      position: absolute;
      inset: 0;
      backdrop-filter: invert(1) contrast(0.75);
      z-index: 2;

      transform: scaleX(0.5);
      transform-origin: right;
    }
  }

  .traffic-lights {
    display: flex;
    gap: 0.1875rem;
    padding-bottom: 0.25rem;
    z-index: 3;

    & > div {
      width: 0.375rem;
      height: 0.375rem;
      border-radius: 50%;
    }

    .red {
      background: var(--illustration-red);
    }

    .yellow {
      background: var(--illustration-yellow);
    }

    .green {
      background: var(--illustration-green);
    }
  }

  .skeleton {
    border-radius: 0.3125rem;
    background: var(--illustration-skeleton);

    &.lg {
      height: 2rem;
      grid-column-end: -1;
    }

    &.md {
      height: 0.5rem;
      grid-column-end: -3;
    }

    &.sm {
      height: 0.5rem;
      grid-column-end: -4;
    }
  }
</style>
